<% include ../partials/header %>
<% include ../partials/nav %>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="jumbotron text-center">
                    <h1 id="header"><%= foundBlog.name%></h1>
                </div>
                <div id="window">
                    <%- foundBlog.body %>
                </div>
            </div>
            <div class="modal-footer">
                <form id="form" action='/blog/<%= foundBlog._id %>?_method=PUT' method='POST'>
                    <div class="form-group">
                        <input id="title" class="hidden-xs hidden-sm hidden-md hidden-lg hidden-xl" type='text' name='blog[name]' placeholder='Blog Title'></input>
                        <button id="submit" class="btn btn-primary" type='submit' name='submit'>Submit</button>
                        <textarea class="hidden-xs hidden-sm hidden-md hidden-lg hidden-xl" name="blog[body]" id="bodyPost"></textarea>
                    </div>
                </form>
            </div>
        </div> 
    </div>
</div>
<div class="row" style="margin-top:100px">
<div class="col-lg-6 col-lg-offset-3 well well-lg">
<div class="well-heading"><h1>Edit a blog:</h1></div>
    <div class="well-body">
    <button id="preview" type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal" style="margin:auto;display:block">Preview</button>
   <hr>
    <input id="titletext" class="form-control" type='text' name='blog[name]' value='<%= foundBlog.name%>'></input>
    <div id="body"></div>
    </div>
</div>
<div class="col-lg-3"></div>
</div>
<div class="col-md-8 col-md-offset-2 text-left">
    <div id="body" type='text'></div>
</div>
<% include ../partials/footer %>
<script src="/js/editor.js"></script>
<link type="text/css" href="/css/editor.css" rel="stylesheet" />
<script>
var text = $("#window").html();
var editor = $("#body").Editor({
    "fonts": false,
    "insert_img": false,
    "splchars": false
    });
editor = $("#body").Editor("setText", text.toString());
$("#preview").click(function () {   
    var post = $("#body").Editor("getText");
    var header= $('#titletext').val();
    $("#header").html(header);
    $("#title").val(header);
    $("#window").html(post);
    $("#bodyPost").html(post);
});
</script>